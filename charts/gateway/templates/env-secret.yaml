{{ if and (.Values.env.useEnvironmentVars) (not .Values.env.existingSecretName) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "gateway.envSecretName" . }}
  annotations:
    description: Default JDBC environment variables for the SSG Gateway
  labels:
    app: {{ template "gateway.name" . }}
    chart: {{ template "gateway.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
type: Opaque
stringData:
    SSGX_gatewayDbJdbcDriverClass: {{ .Values.env.SSGX_gatewayDbJdbcDriverClass }}
    SSGX_gatewayDbJdbcUser: {{ .Values.env.SSGX_gatewayDbJdbcUser }}
    SSGX_gatewayDbJdbcUrl: jdbc:mysql://{{ .Release.Name }}-mysql:3306/ssg
    SSGX_gatewayDbJdbcPassword: {{ .Values.env.SSGX_gatewayDbJdbcPassword }}

{{ end }}
